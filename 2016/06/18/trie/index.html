<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>trie(单词查找树) | Liuniandxx Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="Liuniandxx">
  
  
    <meta name="description" content="字符串查找可以使用通用的查找算法（排序二分、二叉查找树、红黑树、散列表），但是可以利用字符串的性质，开发更高效的算法–Trie树(单词查找树)。Trie树的性能在&amp;lt;&amp;lt;算法&amp;gt;&amp;gt;中具有如下描述：

具体来说，Trie树算法在一般应用场景中（甚至对于巨型的符号表）都能取得以下性能：查找命中所需的时间与被查找的键的长度成正比;查找未命中只需要检查若干个字符。

单词查找树Trie树">
  
  <meta name="description" content="字符串查找可以使用通用的查找算法（排序二分、二叉查找树、红黑树、散列表），但是可以利用字符串的性质，开发更高效的算法–Trie树(单词查找树)。Trie树的性能在&amp;lt;&amp;lt;算法&amp;gt;&amp;gt;中具有如下描述：

具体来说，Trie树算法在一般应用场景中（甚至对于巨型的符号表）都能取得以下性能：查找命中所需的时间与被查找的键的长度成正比;查找未命中只需要检查若干个字符。

单词查找树Trie树">
<meta property="og:type" content="article">
<meta property="og:title" content="trie(单词查找树)">
<meta property="og:url" content="http://yoursite.com/2016/06/18/trie/index.html">
<meta property="og:site_name" content="Liuniandxx Blog">
<meta property="og:description" content="字符串查找可以使用通用的查找算法（排序二分、二叉查找树、红黑树、散列表），但是可以利用字符串的性质，开发更高效的算法–Trie树(单词查找树)。Trie树的性能在&amp;lt;&amp;lt;算法&amp;gt;&amp;gt;中具有如下描述：

具体来说，Trie树算法在一般应用场景中（甚至对于巨型的符号表）都能取得以下性能：查找命中所需的时间与被查找的键的长度成正比;查找未命中只需要检查若干个字符。

单词查找树Trie树">
<meta property="og:updated_time" content="2016-06-22T00:58:46.632Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="trie(单词查找树)">
<meta name="twitter:description" content="字符串查找可以使用通用的查找算法（排序二分、二叉查找树、红黑树、散列表），但是可以利用字符串的性质，开发更高效的算法–Trie树(单词查找树)。Trie树的性能在&amp;lt;&amp;lt;算法&amp;gt;&amp;gt;中具有如下描述：

具体来说，Trie树算法在一般应用场景中（甚至对于巨型的符号表）都能取得以下性能：查找命中所需的时间与被查找的键的长度成正比;查找未命中只需要检查若干个字符。

单词查找树Trie树">
  
    <link rel="alternate" href="/atom.xml" title="Liuniandxx Blog" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">Liuniandxx Blog</a></h1>
    <p><a href="/"></a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/18/trie/">
  <time datetime="2016-06-18T08:22:25.000Z">
    2016-06-18
  </time>
</a>
    
    
  
    <h1 class="title">trie(单词查找树)</h1>
  

  </header>
  
  <div class="entry">
    
      <p>字符串查找可以使用通用的查找算法（排序二分、二叉查找树、红黑树、散列表），但是可以利用字符串的性质，开发更高效的算法–Trie树(单词查找树)。<br>Trie树的性能在&lt;&lt;算法&gt;&gt;中具有如下描述：</p>
<blockquote>
<p>具体来说，Trie树算法在一般应用场景中（甚至对于巨型的符号表）都能取得以下性能：<br>查找命中所需的时间与被查找的键的长度成正比;<br>查找未命中只需要检查若干个字符。</p>
</blockquote>
<h4 id="单词查找树"><a href="#单词查找树" class="headerlink" title="单词查找树"></a>单词查找树</h4><p>Trie树定义<br>单词查找树是由链接的点组成的数据结构。</p>
<ol>
<li>单词查找树有且只有一个根结点，没有任何结点指向根结点</li>
<li>除根节点外，每个节点都有且只有一个指向它的结点（指向它的节点称为它的父结点）</li>
<li>每个节点最多指向R（R为字母表的大小）个结点</li>
<li>叶子节点都指向空（Null）</li>
</ol>
<p>单词查找树的实现：<br><figure class="highlight java"><figcaption><span>Trie</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Trie</span>&lt;<span class="title">value</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> R = <span class="number">256</span>;</span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Object val;</span><br><span class="line">        <span class="keyword">private</span> Node[] next = <span class="keyword">new</span> Node[R];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Value <span class="title">get</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        Node x = get(root, key, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> (Value) x.val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">get</span><span class="params">(Node x, String key, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(d == key.length()) <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">char</span> c = key.charAt(d);</span><br><span class="line">        <span class="keyword">return</span> get(x.next[c], key, d + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">put</span><span class="params">(String key, Value val)</span> </span>&#123;</span><br><span class="line">        root = put(root, key, val, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node x, String key, Value val, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x == <span class="keyword">null</span>) &#123;</span><br><span class="line">            x = <span class="keyword">new</span> Node();</span><br><span class="line">        &#125;    </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(d == key.length()) &#123;</span><br><span class="line">            x.val = val;</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">char</span> c = key.charAt(d);</span><br><span class="line">        x.next[c] = put(x.next[c], key, val, d + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面单词查找树具有如下性质：</p>
<ol>
<li>单词查找树的链表结构（形状）和键的插入删除顺序没有关系：对于任意给定的一组键，其单词查找树都是唯一的。</li>
<li>单词查找树中查找一个键或是插入一个键，访问数组的次数最多为键的长度加1。</li>
<li>一棵单词查找树中链接的总数在RN和RNw之间，其中w为键的平均长度。</li>
</ol>
<p>其实可以发现，上面的单词查找树在时间上具有很好的性能，但是在空间上，特别是当字母表大小R很大时，空间利用率不高，空间需求大，<br>在实践中，限制“普通”的单词查找树的使用。</p>
<h4 id="三向单词查找树"><a href="#三向单词查找树" class="headerlink" title="三向单词查找树"></a>三向单词查找树</h4><p>三向单词查找树是为了解决“普通”单词查找树在空间使用上的不足，引入了类似树的“孩子兄弟表法”思想。<br>三向单词查找树的每个节点都只有三个子连接，分别为left、mid和right。left指向对应小于当前key的节点，mid指向当前位置等于key的节点，right指向当前位置大于key的节点。这样就可以使用三个链接表示所有的结点。<br>三向单词查找树的实现：<br><figure class="highlight java"><figcaption><span>三向单词查找树</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Trie</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        Node left, mid, right;</span><br><span class="line">        <span class="keyword">boolean</span> isLeaf = <span class="keyword">false</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.c = c;</span><br><span class="line">            left = <span class="keyword">null</span>;</span><br><span class="line">            mid = <span class="keyword">null</span>;</span><br><span class="line">            right = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">search</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == word || word.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node p = root;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(index &lt; word.length() &amp;&amp; p != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">char</span> curpos = word.charAt(index);</span><br><span class="line">            <span class="keyword">if</span>(curpos &lt; p.c) &#123;</span><br><span class="line">                p = p.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(curpos &gt; p.c) &#123;</span><br><span class="line">                p = p.right;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ++index;</span><br><span class="line">                <span class="keyword">if</span>(index &gt;= word.length() &amp;&amp; p.isLeaf) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                p = p.mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == word || word.length() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        root = insert(root, word, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">insert</span><span class="params">(Node x, String key, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> curpos = key.charAt(d);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == x) &#123;</span><br><span class="line">            x = <span class="keyword">new</span> Node(curpos);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(curpos &lt; x.c) &#123;</span><br><span class="line">            x.left = insert(x.left, key, d);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(curpos &gt; x.c) &#123;</span><br><span class="line">            x.right = insert(x.right, key, d);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(d &lt; key.length() - <span class="number">1</span>) &#123;</span><br><span class="line">            x.mid = insert(x.mid, key, d + <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            x.isLeaf = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">startsWith</span><span class="params">(String prefix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == prefix || prefix.length() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        Node p = root;</span><br><span class="line">        <span class="keyword">while</span>(index &lt; prefix.length() &amp;&amp; p != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">char</span> curpos = prefix.charAt(index);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(curpos &lt; p.c) &#123;</span><br><span class="line">                p = p.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(curpos &gt; p.c) &#123;</span><br><span class="line">                p = p.right;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                p = p.mid;</span><br><span class="line">                ++index;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index == prefix.length();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

    
  </div>
  <footer>
    
      
      
  <div class="tags">
    <a class="tags-link" href="/tags/data-structure/">data structure</a>
  </div>

    
    <div class="clearfix"></div>
  </footer>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>
  <div class="ds-thread" data-title="trie(单词查找树)">
  </div>
</section>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2016 <a href="/">Liuniandxx</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'liuniandxx' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>